---
name: devax-stats
description: Generate project statistics and development metrics reports. Codebase size, git history, code distribution, commit velocity, and development time analysis.
---

Generate development statistics and metrics for the current project.

## Usage

- `/devax-stats` — Full stats report (codebase + git + distribution)
- `/devax-stats codebase` — Codebase metrics only (files, lines, pages, routes, models)
- `/devax-stats git` — Git history only (commits, authors, date range, velocity)
- `/devax-stats estimate` — Development time estimate (actual vs traditional team)
- `/devax-stats save` — Full report saved to `claude_docs/STATS.md`

If the argument is `$ARGUMENTS` or empty, run the full report and display inline.

## Steps

### 1. Detect Project Context

Read the project's `CLAUDE.md` and `package.json` to identify:
- **Project name**
- **Framework** (Next.js, Express, Flask, etc.)
- **Language** (TypeScript, Python, Go, etc.)
- **Source directory** (usually `src/`)

### 2. Check for Stats Script

Look for a project-specific stats script:
- `scripts/dev-time-report.sh` (Wombat Wise)
- Any `*stats*` or `*metrics*` script in `scripts/`

If a project-specific script exists, offer to run it. Otherwise, gather metrics manually using the checks below.

### 3. Gather Codebase Metrics

Use Glob, Grep, and Bash tools to collect:

| Metric | How |
|--------|-----|
| Source files | `find src/ -type f \( -name "*.ts" -o -name "*.tsx" -o -name "*.py" -o -name "*.go" \)` (adapt to language) |
| Lines of code | `wc -l` on source files (exclude node_modules, .next, dist, __pycache__, venv) |
| Pages | `find . -path "*/app/*" -name "page.tsx"` (Next.js) or equivalent |
| API routes | `find . -path "*/api/*" -name "route.ts"` (Next.js) or equivalent |
| Components | Count files in `components/` directory |
| Library modules | Count files in `lib/` or `utils/` directory |
| DB models | `grep "^model " prisma/schema.prisma` (Prisma) or equivalent |
| Migrations | Count migration files |
| Test files | `find . -name "*.test.*" -o -name "*.spec.*"` |
| Dependencies | Parse `package.json` or `requirements.txt` or `go.mod` |

### 4. Gather Git Metrics

```
git log --oneline | wc -l                    # Total commits
git log --format="%ai" --reverse | head -1   # First commit date
git log --format="%ai" | head -1             # Last commit date
git log --format="%ad" --date=short | sort -u | wc -l  # Active days
git log --format="" --numstat | awk '{s+=$1} END {print s}'  # Total insertions
git log --format="" --numstat | awk '{s+=$2} END {print s}'  # Total deletions
git log --format="%an" | sort | uniq -c | sort -rn           # Authors
git log --format="%ad" --date=short | sort | uniq -c | sort -k2  # Commits per day
```

### 5. Gather Code Distribution

Break down lines of code by major directory:
- `src/app/` or equivalent (pages + routes)
- `src/lib/` or equivalent (business logic)
- `src/components/` or equivalent (UI)
- Database layer (schema, migrations, seeds)
- Tests
- Documentation

### 6. Development Time Estimate (for `estimate` or full report)

Calculate and present:

**Actual timeline:**
- Calendar days (first commit to last commit)
- Active development days (days with commits)
- Average commits per active day
- Lines of code per active day

**Traditional estimate** (heuristic for comparison):
- A productive senior dev writes ~100-200 lines of production code/day
- Each external integration (auth, LLM, OCR, payments, storage, etc.) takes ~3-5 dev-days
- Each CRUD resource (model + API + UI) takes ~2-3 dev-days
- Count integrations and resources from the codebase metrics
- Formula: `(total_lines / 150) + (integrations * 4) + (resources * 2.5)` = estimated person-days
- Convert to weeks (5 dev-days/week) and months (22 dev-days/month)

Present as a comparison table:
```
| Metric | Actual | Traditional Estimate |
|--------|--------|---------------------|
| Calendar time | X active days | Y-Z weeks |
| Person-days | X | Y-Z |
| Speedup factor | — | ~Nx |
```

### 7. Output

**Inline display (default):** Show the full report in the conversation using formatted markdown tables.

**Save mode (`save`):** Write to `claude_docs/STATS.md` using this format:

```markdown
# [Project Name] — Development Statistics

> Generated: YYYY-MM-DD
> Commit: [short hash]

## Codebase Metrics
[table]

## Code Distribution
[table]

## Git History
[tables]

## Development Time Estimate
[comparison table + notes]

---
*Generated by `/devax-stats save`*
```

After saving, tell the user the file path.

## Important

- **Read-only** — this skill never modifies source code
- **Framework-agnostic** — adapt file patterns to the detected language/framework
- **Exclude generated code** — always skip node_modules, .next, dist, __pycache__, venv, build output
- **Be precise** — report exact numbers, don't round unless displaying summaries
- **Project script preferred** — if the project has its own stats script, use it and supplement with additional metrics
